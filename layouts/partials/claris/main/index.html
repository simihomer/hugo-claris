{{- $page := .Page }}
{{- $meta := page.Scratch.Get "clarismeta" }}
{{- $template := "partials/claris/main/index" }}
{{- $itemType := "article" }}
{{- $type := "claris" }}
{{- $kindMap := (dict
    "page" "page"
    "home" "section"
    "section" "section"
    "taxonomy" "section"
    "term" "section"
) }}
{{- with $page }}
  {{- $kind := default "page" (index $kindMap .Kind) }}

  {{- $s := site.Params }}
  {{- $p := .Params }}

  {{- $mainInnerClassList := (slice "main_inner") }}
  {{ if (and (eq $kind "page") (not (or (eq $p.singleColumn true) (eq $p.sidebar false) ) ) ) }}
    {{- $mainInnerClassList = append (slice "grid-main-single inner_horizontal") $mainInnerClassList }}
  {{- end }}

  {{- $componentParams := (dict
    "Page" $page
    "Meta" $meta
    "ItemType" $itemType
    "HeadingLevel" 1
  ) }}

  {{- $sidebar := default false ($page.Param "sidebar") }}
  {{- if (in (slice "page") $kind) }}
    {{- $sidebar = default true ($page.Param "sidebar") }}
  {{- end }}

  {{ partial "html-comment" (printf "[%s]: BEGIN" $template) }}
  {{ partial (printf "%s/_components/feature-image" $type) $componentParams }}
  <div class="{{ delimit $mainInnerClassList " " }}" id="contentContainer">
    {{ partial (printf "%s/main/%s" $type $kind) $componentParams }}
    {{- if $sidebar }}
      {{ partial "claris/_components/sidebar" (dict "Page" $page "ItemType" $itemType) }}
    {{- end }}
  </div>
  {{ partial "html-comment" (printf "[%s]: END" $template) }}
{{- end }}
