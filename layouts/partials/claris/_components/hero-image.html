{{- $meta := page.Scratch.Get "clarismeta" }}
{{- $imagesMeta := $meta.Single.Data.Images }}
{{- $template := "partials/hero-image" }}
{{- $page := page }}
{{- $debug := and false (or .Debug ($page.Param "clarisdebug") ) }}
{{- $dbg := printf "%s[%s]" (replaceRE `.*?((?:[^/]+/){,2})$` `$1` $page.RelPermalink) (replaceRE `.*?([^/]+)$` `$1` $template) }}
{{- with and (reflect.IsMap . ) . }}
  {{- $page = default $page .Page }}
{{- end }}

{{- $fetchPriority := "low" }}
{{- if reflect.IsMap . }}
  {{- with .FetchPriority }}
    {{- $fetchPriority = . }}
  {{- end }}
{{- end }}
{{- with $imagesMeta.hero }}
  {{- $imageParams := merge $imagesMeta.hero (dict
      "Page" page
      "figureclass" (printf "hero-image_%s_figure" $imagesMeta.hero.style)
      "imgclass" (printf "hero-image_%s_img" $imagesMeta.hero.style)
      "fetchpriority" $fetchPriority
      "Debug" $debug
    ) -}}
  {{/* {{- warnf "%s[%s]: Calling responsive-image with .style=%v and .resource=%v'"
      page $template .style .variant }} */}}
  {{- partial "responsive-image" $imageParams }}
{{- else }}
  {{- errorf "%s[%s]: Invalid page meta .Single.Image.Data.Images.hero: %v'"
      page $template $meta.Single.Data.Images.hero }}
{{- end }}
