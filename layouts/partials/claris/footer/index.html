{{- $page := .Page }}
{{- $title := site.Title }}
{{- $siteAuthor := site.Author.name }}
<footer class="footer">
  <div class="footer_inner inner_horizontal inner_bottom-0">
    {{- if not (and (isset .Params "footer") (eq .Params.footer false) ) }}
      {{- $footerPages := where site.RegularPages.ByWeight "Type" "in" site.Params.footer.section }}
      {{- with $footerPages }}
        {{- with $title }}
          <h2 class="footer_title">{{- . | $page.RenderString }}</h2>
        {{- end }}
        <div class="grid-footer">
          {{- range $id, $page := $footerPages }}
            <div class="footer_page grid-id-{{ add $id 1 }}">
              {{ $page.Page.Content }}
            </div>
          {{- end }}
        </div>
      {{- else }}
        {{- if (or ($page.Param "IntroDescription") ($page.Param "footer.recentarticles)") ) }}
          <div class="grid-footer">
          {{- if ($page.Param "IntroDescription") }}
            <h2>{{ $siteAuthor }}</h2>
            <div class="footer_description">
              <div class="footer_intro">
                {{ ($page.Param "IntroDescription") | $page.RenderString }}
              </div>
              {{- if ( ($page.Param "introURL") ) }}
                {{- $r := T "read_more_about" | strings.FirstUpper }}
                <p>
                {{ $r }} <a href='{{ absLangURL (default "about/" ($page.Param "introURL") ) }}' title='{{ $r }} {{ $siteAuthor }}'>{{ $siteAuthor }}</a>
                </p>
              {{- end }}
            </div>
          {{- end }}
          {{- with ($page.Param "footer.recentarticles") }}
              <div class="footer_articles">
                <h3>{{- T "recent_articles" . }}</h3>
                  {{- $contentParams := (dict
                    "ItemType" "article"
                    "ListLayout" "list"
                    "ListParams" (dict
                      "IncludeSections" (default "/" ($page.Param "mainSections") )
                      "Limit" .
                    )
                  ) }}
                  {{- partial "claris/_components/list" (merge $contentParams (dict "Page" $page) ) }}
              </div>
          {{- end }}
          </div>
        {{- end }}
      {{- end }}
    {{- end }}
    <div class="footer_copyright">
      <p>{{ T "copyright" }}&nbsp;{{ with ($page.Param "since") }}{{ if (lt (int .) (int (now.Format "2006") ) ) }}{{ . }}â€“{{- end }}{{- end }}<span class="year">{{ string (now.Format "2006") }}</span>{{ with $siteAuthor }}&nbsp;{{ . }}{{ end }}. {{ T "all_rights" }}
      </p>
    </div>
  </div>
</footer>
