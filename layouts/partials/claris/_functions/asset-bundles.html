{{- $assets := dict }}
{{- $page := .Page }}
{{- $template := "claris/_functions/asset-bundles" }}

{{- $assetVariant := $page.Scratch.Get "claris.assets.variant" -}}

{{/* {{- warnf "%s[%s]: RelPermalink=%s .Type=%s .Layout=%s $contentTypeList=%s $mediaTypeList=%s" .Page $template .Page.RelPermalink .Type .Layout $contentTypeList $mediaTypeList -}} */}}

<!-- Bundle CSS: styles from all content types merged per mediaType type -->
<!-- FIXME: Sometimes a change to a template file such as
"claris/_functions/style-bundles", which changes the stylesheets, is
only reflected in `/index.html` but not in other files.
Trying to add additional parameters to the below calls to partialCached,
maybe this helps -->
{{/* {{- $styleBundles := partialCached "claris/_functions/style-bundles"
  (merge $bundleParams (dict "Page" $page)) $bundleParams $mediaTypeList $contentTypeList $minifyBundles }} */}}
{{- $styleBundles := partialCached "claris/_functions/style-bundles" . $assetVariant }}

<!-- Bundle JS: styles from all content types merged per mediaType type -->
{{/* {{- $scriptBundles := partialCached "claris/_functions/script-bundles"
  (merge $bundleParams (dict "Page" $page)) $bundleParams $mediaTypeList $contentTypeList $minifyBundles }} */}}
{{- $scriptBundles := partialCached "claris/_functions/script-bundles" . $assetVariant }}

{{- $assets = (dict "Styles" $styleBundles "Scripts" $scriptBundles) }}
{{- return $assets }}
