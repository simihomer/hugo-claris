{{- $template := "claris/_functions/meta/title" }}
{{- $page := .Page }}
{{- $meta := .Meta }}
{{- $title := default .Title $meta.Single.Data.Title }}
<!-- Adjust title for some values of .Kind -->
{{- if in (slice "taxonomy") .Kind }}
  {{- partial "html-comment" (printf "[%s]: .Kind:%s .Singular:%s .Plural:%s .Section:%s .Title:%s" $template .Kind .Data.Singular .Data.Plural .Section .Title) }}
  {{- $title = default .Data.Plural (default (T (printf "%s_list_title" .Data.Singular) | title) $title) }}
{{- else if in (slice "term") .Kind }}
  {{- partial "html-comment" (printf "[%s]: .Kind:%s .Singular:%s .Plural:%s .Section:%s .Title:%s" $template .Kind .Data.Singular .Data.Plural .Section .Title) }}
  {{- $title = default .Data.Singular $title }}
  {{- $titlePrefix := T "articles_in_taxonomy" }}
  {{ if in (slice "tag") .Data.Singular }}
    {{ $titlePrefix = T "articles_with_taxonomy" }}
  {{- end }}
  {{- $title = printf "%s %s %s" (humanize $titlePrefix) .Data.Singular ($page.RenderString (printf "*%s*" .Title) ) | safeHTML }}
{{- end }}
{{/* {{- warnf "%s[%s]: .Kind=%s .Data.Singular=%s: title=%v" $page $template .Kind .Data.Singular $title }} */}}
{{- return $title }}
