{{- $page := .Page }}
{{- $schemaOrgMeta := .SchemaOrgMeta }}
{{- $template := "claris/_functions/schema-org/article" }}

<!-- [Schema.org entity Article](https://schema.org/Article)
## Background
 * [Correct use of mainEntityOfPage schema](https://stackoverflow.com/a/52496080/617559)
-->

{{- $mainEntityOfPage := (dict "@type" "WebPage" "@id" (partial "claris/_functions/canonical-url" .Page) ) }}

{{- with .Meta.Single.Data }}
  {{- $schemaOrgMeta = merge $schemaOrgMeta (dict
    "Root" (dict
      "@type" "Article"
      "articleSection" .ArticleSection
      "mainEntityOfPage" $mainEntityOfPage
      "wordCount" .WordCount
    )
  ) }}
{{- else }}
  {{- errorf "%s[%s]: Missing parameter .Meta.Single.Data" $page $template }}
{{- end }}

{{- return $schemaOrgMeta }}
